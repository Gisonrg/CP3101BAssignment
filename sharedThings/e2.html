<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Shared Things</title>
		<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
		<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
		<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
		<script src="lib/jquery.ui.touch-punch.min.js"></script> <!-- http://touchpunch.furf.com/ -->
		<style>
			.draggable { position: fixed; } 
		</style>
		<script>
			//the world state object
			var world = {
							"x1":{"x":8,"y":8}, "x2":{"x":8,"y":8}, "x3":{"x":8,"y":8},
							"x4":{"x":8,"y":8}, "x5":{"x":8,"y":8}, "o1":{"x":8,"y":8},
							"o2":{"x":8,"y":8}, "o3":{"x":8,"y":8}, "o4":{"x":8,"y":8},
							"o5":{"x":246,"y":32},"tttboard":{"x":8,"y":8}
						};

			function logDrag(event, ui){
				// get the current target from the world state
				var item =  event.target.id;

				//update current item's position in the world state
				world[item].x = ui.position.left;
				world[item].y = ui.position.top;
				
				//turn the state into an JSON string
				var obj = JSON.stringify(world);


				//sending get requirement to the e2.php
				$.get("e2.php", {state: obj}, function(data) {
					//get the data and output in console
					console.log(data);
				});
				
			}

			$(function() { 
				$("#world img").draggable(); 

				$("#world img").on("dragstart", function(event, ui) { logDrag(event, ui); });
				$("#world img").on("dragstop" , function(event, ui) { logDrag(event, ui); });
				$("#world img").on("drag"     , function(event, ui) { logDrag(event, ui); });
			});
			
		</script>
	</head>
	<body>
		<div id="world">
			<img id="x1" src="images/x.gif" style="z-index:2;" class="draggable" />
			<img id="x2" src="images/x.gif" style="z-index:2;" class="draggable" />
			<img id="x3" src="images/x.gif" style="z-index:2;" class="draggable" />
			<img id="x4" src="images/x.gif" style="z-index:2;" class="draggable" />
			<img id="x5" src="images/x.gif" style="z-index:2;" class="draggable" />
			<img id="o1" src="images/o.gif" style="z-index:2;" class="draggable" />
			<img id="o2" src="images/o.gif" style="z-index:2;" class="draggable" />
			<img id="o3" src="images/o.gif" style="z-index:2;" class="draggable" />
			<img id="o4" src="images/o.gif" style="z-index:2;" class="draggable" />
			<img id="o5" src="images/o.gif" style="z-index:2;" /class="draggable" >
			<img id="tttboard" src="images/tictactoe.gif" style="z-index:1;" class="draggable" />
		</div>
	</body>
</html>
