<!--index.html-->
<html lang="en">
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<script src="js/jquery-2.1.0.js"></script>
		<script>
		// JQuery here
		function showForm(name) {
			$(name).show();
		}

		function checkLogin() {
			$.getJSON("model/checkLogin.php", function(data) {
				console.log(data);
				if (data['status'] == 'true') {
					// if login, show the interface of after login

				} else {
					// else, show the login form
					showForm('.login');
				}
			});
		}

		function authenticate() {

			alert("You are here!");
			//get input data
			var input = {};
			input.name = $("#login_form input[type=text]").val();
			input.password = $("#login_form input[type=password]").val();
			console.log(input);
			//wrap the data to a JSON string
			var logindata = JSON.stringify(input);
			console.log(logindata);

			//sending data to the model
			$.post( "model/loginResult.php", {login: logindata}, function( data ) {
			  alert( "Data Loaded: " + data );
			  console.log(data);
			});
		}





		//main execution function
		$(function(){
			// firstly, check if the user has logged in.
			checkLogin();









			// event handler

			//login
			$("#login_submit").click(function(event){
			  event.preventDefault();
			  authenticate();
			});



		});
		</script>
	</head>

	<body>

		
		<!--login form-->
		<div class="login" style="display:none">
            <div id="tag">Please Sign In</div>	
            <form id="login_form">
                <label for="name">Username</label>
                <input type="text" name="name" placeholder="User Name" required="" autofocus="">
                <br />
                <label for="name">Password</label>
                <input type="password" name="password" placeholder="Password" required="">
                <br />
                <p>
                    <a id="found-psw" href="register.php">Need an account?</a>
                </p>
                <br />
                <input id = "login_submit" type="submit" class="button button-input" name="submit" value="Login">
            </form>
        </div>

		<!--register form-->
		<div class="register" style="display:none">
		<div id="tag">New User Register</div>	
		  <form id="register_form">
		    <label for="name">User Name</label>
		    <input type="text" name="name" placeholder="User Name" required="" autofocus="" value="">
		    <br/>  
		    <label for="email">E-mail</label>
		    <input type="email" name="email" placeholder="E-mail" required="" value="">
		    <br/>
		    <label for="password">Password</label>
		    <input type="password" name="password" placeholder="Password" required="">
		    <br/>
		    <input id = "register_submit" type="submit" name="submit" class="button button-input" value="Sign Up">
		  </form>
		</div>

		

	</body>
</html>
